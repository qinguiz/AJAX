<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>ajax</title>
	<script>
		window.onload = function(){
			var oBtn = document.querySelector("#btn");
			oBtn.onclick = function(){
				//创建XMLHttpRequest对象，
				//ie7以下 new ActiveXObject("Microsoft.XMLHTTP");
				var xhr;
				// if (window.XMLHttpRequest) {
				// 	xhr = new XMLHttpRequest;
				// }else{
				// 	xhr = new ActiveXObject("Microsoft.XMLHTTP");
				// }

				try{
					xhr = new XMLHttpRequest();
				}catch(e){
					xhr = new ActiveXObject("Microsoft.XMLHTTP");
				}

				/*
					open方法
					参数
						1.打开方式
						2.地址
						3.是否异步
							异步：true；非阻塞 不用等待前面的程序执行完再执行之后的程序
							同步：false；阻塞 等待前面的程序执行完才能执行后面的程序
				*/
				//准备工作
				xhr.open('get','getList.php',true);
				//发送请求
				xhr.send();
				//等待服务器响应
				/*
					readyState：ajax的工作状态
					responseText：ajax请求返回的内容就被存在这个属性里面
					on readystate change：当readyState改变的时候触发
					status：服务器状态
				*/
				xhr.onreadystatechange = function(){
					if (xhr.readyState == 4) {
						if (xhr.status == 200) {
							alert(xhr.responseText);
						}else{
							alert("Error:"+xhr.status);
						}
					}
				}
			}
		}
	</script>
</head>
<body>
	<button id="btn">Button</button>
</body>
</html>